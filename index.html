<!doctype html>

<html lang="en">
<head>
    <meta charset="utf-8">

    <title></title>
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    

    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="jquery.typeahead.js"></script>
     <script>
      function appendResults(image, url){
        var results = document.getElementById('vidResults');
    
        //frame tags
        var iframe = document.createElement("iframe");
        iframe.src="http://www.youtube.com/embed/" + url + "?autoplay=1";
        var rChildren = results.childNodes;
        if(rChildren[0])
          results.replaceChild(iframe, rChildren[0]);
        else
          results.appendChild(iframe);
      }
      //YouTube Search Requirements for general data display
      function makeRequest() {
        var team = "top" + document.getElementById("query").value + "highlights for 2013";
        var request = gapi.client.youtube.search.list({
          part: 'snippet',
          q: team,
          maxResults: 1
        });
        request.then(function(response) {
          var searchTitle = response.result.items;
            //For each video returned in the search, return the video url and thumbnail url.
            var imgLink = response.result.items[0].snippet.thumbnails.high.url;
            var videoLink = response.result.items[0].id.videoId;
            appendResults(imgLink, videoLink);
        }, function(reason) {
          console.log('Error: ' + reason.result.error.message);
        });
      }
      //set GoogleApi Key, and the YouTube Search data service
      function init() {
        gapi.client.setApiKey('AIzaSyDSt0Km1lKX2unePlElPdtBFHafBkcMFHw');
        makeRequest();
      }
      function onLoad(){
        gapi.client.load('youtube','v3');
      }
    </script>
    <script src="https://apis.google.com/js/client.js?onload=onLoad"></script>
</head>
<body>

    <img id="header" src="img/heading.png" />

    <form id="searchBox">
        <div class="typeahead-container">
            <div class="typeahead-field">

                <span class="typeahead-query">
                    <input id="query"
                           name="query"
                           type="search"
                           placeholder="Search NFL Teams"
                           autocomplete="off">
                </span>
                <span class="typeahead-button">
                    <button type="submit" onClick="init();return false;">
                        <i class="search-icon"></i>
                    </button>
                </span>

            </div>
        </div>
    </form>

    <div id="vidResults"></div>

    <script>

        var data = {
            teams: ["Arizona Cardinals",
                        "Atlanta Falcons",
                        "Baltimore Ravens",
                        "Buffalo Bills",
                        "Carolina Panthers",
                        "Chicago Bears",
                        "Cincinnati Bengals",
                        "Dallas Cowboys",
                        "Denver Broncos",
                        "Detroit Lions",
                        "Green Bay Packers",
                        "Houston Texans",
                        "Indianapolis Colts",
                        "Jacksonville Jaguars",
                        "Kansas City Chiefs",
                        "Miami Dolphins",
                        "Minnesota Vikings",
                        "New England Patriots",
                        "New Orleans Saints",
                        "NY Giants",
                        "NY Jets",
                        "Oakland Raiders",
                        "Philadelphia Eagles",
                        "Pittsburgh Steelers",
                        "San Diego Chargers",
                        "San Francisco 49ers",
                        "Seattle Seahawks",
                        "St. Louis Rams",
                        "Tampa Bay Buccaneers",
                        "Tennessee Titans",
                        "Washington Redskins"]
        };

        $('#query').typeahead({
            minLength: 1,
            order: "asc",
            group: true,
            hint: true,
            list: false,
            backdrop: true,
            source: {
                team: {
                    data: data.teams
                }
              
            },
            debug: true
        });
    </script>

</body>
</html>