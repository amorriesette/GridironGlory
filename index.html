<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <!---------- GRIDIRON GLORY ----------- 

    This app allows users to view the top nfl video on YouTube based on the users input.
  -->

    <link rel="stylesheet" type="text/css" href="css/reset.css" />
    <link rel="stylesheet" type="text/css" href="css/main.css" />
    <script>
      function appendResults(image, url){

        var linebreak = document.createElement("br");
        var results = document.getElementById('vidResults');
         //Create a div for each result set. It will include the medium size thumbnail image and the title below it as the link to the video on YouTube.

        //img tags
        var i = document.createElement('img');
        i.setAttribute('src', image);
        results.appendChild(i);
      }

      //YouTube Search Requirements for general data display
      function makeRequest(v) {

        var video = document.getElementById('vidResults');
        var t = document.createTextNode(v);
        video.appendChild(t);
        video.appendChild(document.createTextNode("testers"));
        
        var request = gapi.client.youtube.search.list({
          'part': 'snippet',
          'q': v,
          'maxResults': 1
        });
     
        

        request.then(function(response) {
          var searchTitle = response.result.items;
          for(var i=0; i < searchTitle.length; i++){

            //For each video returned in the search, return the video url and thumbnail url.
            var imgLink = response.result.items[i].snippet.thumbnails.high.url;
            var videoLink = response.result.items[i].id.videoId;
            appendResults(imgLink, videoLink);
          }
         
        }, function(reason) {
          console.log('Error: ' + reason.result.error.message);
        });
      }

      //set GoogleApi Key, and the YouTube Search data service
      function init() {
        gapi.client.setApiKey('AIzaSyBdGAsIfJXnGtkt2EIK49s5HddUtFtokD0');
      }

      function search(value){
        gapi.client.load('youtube', 'v3').then(makeRequest(value));
      }


    </script>
    <script src="https://apis.google.com/js/client.js?onload=init"></script>
  </head>
  <body>

      <!-- User enters in the name of the team in the textbox. The text gets passed into search() -> makerequest(). Add a placeholder into makerequest().. i.e. 'top' + userrequest + 'plays'. -->
      <form id= "searchBox">
        <input name="searchValue" id="q" placeholder="Search NFL Teams">
        <input type="submit" value="Search" name ="submit" onCLick="search(this.form.searchValue.value)">
      </form>

      <div id="vidResults"></div>
      

  </body>
</html>